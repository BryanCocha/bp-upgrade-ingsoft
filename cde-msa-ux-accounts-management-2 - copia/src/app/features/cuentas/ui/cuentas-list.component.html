<div style="margin-bottom:1rem;">
  <h3>Nueva Cuenta</h3>
  <input type="text" placeholder="Número de Cuenta" [(ngModel)]="nuevaCuenta.accountNumber" />
  <input type="text" placeholder="Tipo" [(ngModel)]="nuevaCuenta.accountType" />
  <input type="number" placeholder="Saldo Inicial" [(ngModel)]="nuevaCuenta.initialBalance" />
  <select [(ngModel)]="nuevaCuenta.idMgmtCustomer">
    <option value="" disabled selected>Seleccione Cliente</option>
    <option *ngFor="let cliente of clientes" [value]="cliente.mgmtCustomerId || cliente.idMgmtCustomer">{{cliente.name}}</option>
  </select>
  <label><input type="checkbox" [(ngModel)]="nuevaCuenta.state" /> Activo</label>
  <button (click)="crearCuenta()">Crear</button>
</div>

<div *ngIf="editando" style="margin-bottom:1rem;">
  <h3>Editar Cuenta</h3>
  <input type="text" placeholder="Número de Cuenta" [(ngModel)]="cuentaEditando.accountNumber" />
  <input type="text" placeholder="Tipo" [(ngModel)]="cuentaEditando.accountType" />
  <input type="number" placeholder="Saldo Inicial" [(ngModel)]="cuentaEditando.initialBalance" />
  <select [(ngModel)]="cuentaEditando.idMgmtCustomer">
    <option value="" disabled selected>Seleccione Cliente</option>
    <option *ngFor="let cliente of clientes" [value]="cliente.mgmtCustomerId || cliente.idMgmtCustomer">{{cliente.name}}</option>
  </select>
  <label><input type="checkbox" [(ngModel)]="cuentaEditando.state" /> Activo</label>
  <button (click)="actualizarCuenta()">Actualizar</button>
  <button (click)="cancelarEdicion()">Cancelar</button>
</div>

<input type="text" placeholder="Buscar por número de cuenta" [(ngModel)]="busqueda" />
<button (click)="buscarCuenta()">Buscar</button>
<button (click)="cargarCuentas()">Cargar todos</button>

<table>
  <thead>
    <tr>
      <th>Número Cuenta</th>
      <th>Tipo</th>
      <th>Saldo Inicial</th>
      <th>Estado</th>
      <th>Cliente</th>
      <th>Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let cuenta of cuentas">
      <td>{{cuenta.accountNumber}}</td>
      <td>{{cuenta.accountType}}</td>
      <td>{{cuenta.initialBalance}}</td>
      <td>{{cuenta.state ? 'Activo' : 'Inactivo'}}</td>
      <td>{{obtenerNombreCliente(cuenta.idMgmtCustomer)}}</td>
      <td>
        <button (click)="editarCuenta(cuenta)">Editar</button>
        <button (click)="eliminarCuenta(cuenta)">Eliminar</button>
      </td>
    </tr>
  </tbody>
</table>
